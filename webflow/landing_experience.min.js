function initPhonePreviewer(){var e=new Preview3D;e.init()}function setFullHeight(){var e=$(".full-page"),t=$(window);Webflow.resize.on(function(){e.height(t.height())})}var phoneContainer=$("#phoneContainer"),phoneInnerImage=$("#phoneInnerImage"),phoneOverlay=$("#phoneContainer .overlay"),phoneFrame=$("#phoneFrame"),btnStartDemo=$("#Button-Start-Demo"),divDeviceSelector=$("#Device-Selection");class Preview3D{constructor(){this.util=new PreviewUtil;let e=1.4;this.devices=[{iconClass:".iphone-icon",frameURL:"https://uploads-ssl.webflow.com/6049feb0a862ecb2aaeba05e/6071cb91a4f8de6dee978226_iphone_frame.png",dimens:{w:200*e,h:400*e,br:50}},{iconClass:".ipad-icon",frameURL:"https://uploads-ssl.webflow.com/6049feb0a862ecb2aaeba05e/60868c44d877c1fcbed4704b_iPad.png",dimens:{w:593*e,h:426*e,br:15}}],this.isDraggingPhone=!1,this.exitTryCount=0,this.maxExitTries=2}init(){this.addEvents();var e=this;Webflow.resize.on(function(){e.adjustInnerImageDimens()}),this.saveInitialPhonePosition(),this.movePhone(),phoneContainer.fadeIn(300),this.loadDeviceImages(),this.setupDeviceSelectors()}saveInitialPhonePosition(){let e=phoneContainer,t=$(window).width(),i=$(window).height(),o=e.width(),n=e.height();this.lastPhonePosition={x:(t-o)/2,y:i-n-50}}movePhone(e,t,i=!1){let o=phoneContainer,n="."+o.attr("class"),{x:a,y:s}=this.lastPhonePosition;e&&t||this.saveInitialPhonePosition(),e=null==e?this.lastPhonePosition.x:e,t=null==t?this.lastPhonePosition.y:t;let r=$(window).width(),h=$(window).height(),l=o.width(),d=o.height();e=this.util.snapTo(e,0,r-l),t=this.util.snapTo(t,0,h-d),i?gsap.fromTo(n,{x:a,y:s},{x:e,y:t,duration:.3}):o.css({transform:`translate(${e}px, ${t}px)`}),this.moveBG(e,t,i),this.lastPhonePosition.x=e,this.lastPhonePosition.y=t}loadDeviceImages(){this.util.loadImages(["https://uploads-ssl.webflow.com/6049feb0a862ecb2aaeba05e/60842908790e4756cb361a7a_MicrosoftTeams-image%20(18).png","https://uploads-ssl.webflow.com/6049feb0a862ecb2aaeba05e/60868c44d877c1fcbed4704b_iPad.png"],this.doInitialAnimation.bind(this))}moveBG(e,t,i){let o=phoneInnerImage,n="."+o.attr("class"),a=e+this.bgPositionOffset,s=t,r={backgroundPosition:`-${a}px -${s}px`,duration:.3};i?gsap.to(n,r):o.css(r)}setupDeviceSelectors(){let e=divDeviceSelector,t=this.devices;t.forEach(t=>{let{iconClass:i}=t,o=e.find(i);if(0==o.length)return;let n=encodeURIComponent(JSON.stringify(t));o.attr("data-device",n),o.on("click",this.updateActiveDevice.bind(this))})}doInitialAnimation(e=1){let t=phoneContainer,{x:i,_:o}=this.util.getXYTransform(t),n=gsap.timeline({onUpdate:()=>{let{x:e,y:i}=this.util.getXYTransform(t);this.moveBG(e,i)}});n.to($(".overlay .spinner"),{opacity:0,duration:.3}),n.to(t,{opacity:1,duration:.3},0),n.to(phoneOverlay,{opacity:.9,duration:.3},0),n.fromTo(t,{x:i},{x:i-100*e}),n.to(t,{x:`+=${200*e}`}),n.to(t,{x:`-=${100*e}`}),n.to(btnStartDemo,{opacity:1,duration:.3})}updateActiveDevice(e){let t=$(e.target),i=t.attr("data-device"),o=JSON.parse(decodeURIComponent(i)),n=phoneContainer,a=phoneFrame,s=phoneInnerImage,{dimens:r,frameURL:h}=o;divDeviceSelector.children().removeClass("active"),t.addClass("active"),a.css({"background-image":`url(${h})`,"border-radius":`${r.br}px`}),n.css({height:r.h,width:r.w,"border-radius":`${r.br}px`}),s.css({"border-radius":`${r.br}px`}),this.movePhone(void 0,void 0,!1),setTimeout(()=>this.doInitialAnimation((r.w<r.h)+1),200)}addEvents(){let e=phoneContainer,t=btnStartDemo;t.on("click",e=>{this.enterPreviewMode({x:e.pageX,y:e.pageY})}),e.on("click",e=>{this.isDraggingPhone&&this.exitPreviewMode()})}enterPreviewMode(e){let t=phoneContainer,i=btnStartDemo,o=divDeviceSelector;this.isDraggingPhone=!0,this.mouseOffset={x:t.width()/2,y:t.height()/2},$(".nav-copy, .nav-shadow").fadeOut(300),i.fadeOut(300),o.fadeOut(300),$("#main-heading").fadeOut(300),t.css("cursor","none"),e&&this.movePhone(e.x-t.width()/2,e.y-t.height()/2,!0),this.moveHandler=this.mouseMoveHandler.bind(this),$(document).bind("mousemove",this.moveHandler),gsap.to(phoneOverlay,{opacity:0,duration:.3},0)}exitPreviewMode(){if(++this.exitTryCount!=this.maxExitTries)return;this.exitTryCount=0;let e=btnStartDemo;this.isDraggingPhone=!1,$(".nav-copy, .nav-shadow").fadeIn(300),e.fadeIn(300),$("#main-heading").fadeIn(300),phoneContainer.css("cursor","default"),this.movePhone(void 0,void 0,!0),$(document).unbind("mousemove",this.moveHandler),this.mouseOffset=void 0,gsap.to(phoneOverlay,{opacity:.9,duration:.3},0)}adjustInnerImageDimens(){this.actualImage=new Image,this.actualImage.src=phoneInnerImage.css("background-image").replace(/"/g,"").replace(/url\(|\)$/gi,""),$(this.actualImage).bind("load",this.innerImageLoadHandler.bind(this))}innerImageLoadHandler(){let e=this.actualImage.width,t=this.actualImage.height,i=$(window).height(),o=$(window).width(),n=i/t,a=e*n,s=t*n,r=a-o,h=r/2;this.bgPositionOffset=h,phoneInnerImage.css({backgroundSize:`${a}px ${s}px`}),this.movePhone()}mouseMoveHandler(e){let t=this.mouseOffset;if(!t)return;let i=e.clientX,o=e.clientY,n=i-t.x,a=o-t.y+$(window).scrollTop();this.movePhone(n,a)}}class PreviewUtil{snapTo(e,t,i){return e<t?t:e>i?i:e}getXYTransform(e){let t=e.css("transform").replace(/[^0-9\-.,]/g,"").split(",").map(e=>parseFloat(e));return{x:t[4],y:t[5]}}loadImages(e,t){var i=0,o=e.length;const n=()=>0==--o&&t();for(;i<e.length;){const t=new Image;t.src=e[i++]+"",t.onload=n}}}try{Webflow.push(setFullHeight),Webflow.push(initPhonePreviewer)}catch(e){console.log("error in landing-experience script")}